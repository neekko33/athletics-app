<%= render "shared/step_bar", step: "athletes" %>
<div class="w-full bg-white p-6 rounded-md shadow-md">
  <div class="w-full flex justify-end mb-4">
    <button class="btn btn-secondary mr-2" disabled>批量导入</button>
    <%= link_to "手动添加", new_competition_athlete_path, class: "btn btn-primary" %>
  </div>
  <div class="flex-1">
    <% if @athletes.any? %>
      <table class="table w-full max-w-3xl mx-auto">
        <thead>
        <tr>
          <th></th>
          <th>姓名</th>
          <th>年级</th>
          <th>班级</th>
          <th>报名项目</th>
          <th>操作</th>
        </tr>
        </thead>
        <tbody>
        <% @athletes.each_with_index do |athlete, index| %>
          <tr>
            <td><%= index + 1 %></td>
            <td><%= athlete.name %></td>
            <td><%= athlete.grade_name %></td>
            <td><%= athlete.class_name %></td>
            <td>
              <% if athlete.events.any? %>
                <div class="text-sm">
                  <% athlete.events.each do |event| %>
                    <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mr-1 mb-1">
                      <%= event.name %>
                    </span>
                  <% end %>
                </div>
              <% else %>
                <span class="text-gray-500 text-sm">未报名项目</span>
              <% end %>
            </td>
            <td>
              <button class="btn btn-sm">编辑</button>
              <button class="btn btn-sm btn-error">删除</button>
            </td>
          </tr>
        <% end %>
        </tbody>
      </table>
      <div class="w-full flex justify-end mt-4">
        <%= link_to "下一步", class: "btn btn-primary mt-4" %>
      </div>
    <% else %>
      <p>暂时还没有登记的运动员信息</p>
    <% end %>
  </div>
</div>
