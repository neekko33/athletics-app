# 运动会管理系统使用指南

## 系统概述

本系统是一个完整的学校运动会管理平台，支持从运动员报名到赛事安排的全流程管理。

## 主要功能模块

### 1. 运动会管理
- 创建和管理运动会基本信息
- 设置运动会名称和开始日期
- 查看运动会整体统计数据

### 2. 年级管理
- 添加参赛年级
- 为每个年级设置排序
- 自动创建班级信息

### 3. 运动员管理
- 手动添加单个运动员
- Excel批量导入运动员
- 自动生成运动员编号
- 编辑和删除运动员信息
- 查看运动员报名项目

### 4. 径赛分组
- 自动将径赛项目分组
- 智能分配赛道
- 支持接力项目特殊处理
- 手动调整分组信息

### 5. 日程安排
- 为每个比赛分组安排时间
- 设置比赛场地
- 添加备注信息
- 查看完整日程表

## 使用流程

### 第一步：创建运动会

1. 进入系统首页
2. 点击"新建运动会"
3. 填写运动会名称和开始日期
4. 保存后进入运动会详情页

### 第二步：设置参赛年级

1. 在运动会详情页点击"开始配置"
2. 或直接进入"年级管理"
3. 点击"添加年级"
4. 输入年级名称（如"一年级"）和排序号
5. 重复以上步骤添加所有参赛年级

### 第三步：添加运动员

#### 方式A：手动添加

1. 进入"运动员列表"
2. 选择对应的年级标签
3. 点击"添加运动员"
4. 填写信息：
   - 姓名（必填）
   - 性别（必填，会自动过滤可报名项目）
   - 班级（必填，不存在会自动创建）
   - 报名项目（可多选）
5. 提交保存

#### 方式B：批量导入

1. 准备Excel文件（参考模板）
2. 点击"批量导入"按钮
3. 选择Excel文件
4. 点击"开始导入"
5. 查看导入结果

**Excel模板格式：**
```
年级 | 班级 | 姓名 | 性别 | 报名项目
一年级 | 1班 | 张三 | 男 | 男子100米,男子跳远
```

详细说明见：[Excel导入指南](./excel-import-guide.md)

### 第四步：生成运动员编号

1. 确认所有运动员已添加完成
2. 在"运动员列表"页面点击"生成编号"
3. 系统会按年级→班级→性别顺序自动分配001开始的编号
4. 确认生成结果

### 第五步：径赛分组

1. 进入"径赛分组"页面
2. 点击"自动生成分组"
3. 系统会：
   - 为每个径赛项目自动分组
   - 每组最多6人（可配置）
   - 随机分配赛道位置
   - 确保赛道连续
   - 接力项目按班级分组
4. 查看分组结果
5. 可以手动编辑调整

**分组规则：**
- 普通径赛：随机分组，每组最多6人
- 接力项目：按班级分组，每队4人
- 赛道分配：参赛人数少于赛道数时保证连续

### 第六步：安排日程

1. 进入"日程安排"页面
2. 查看"未安排的比赛分组"列表
3. 点击某个分组的"安排时间"
4. 填写信息：
   - 开始时间（必填）
   - 结束时间（可选）
   - 场地（可选）
   - 备注（可选）
5. 保存日程
6. 重复以上步骤安排所有分组

### 第七步：查看总览

1. 返回运动会详情页
2. 查看统计数据：
   - 参赛年级和班级数
   - 报名人数
   - 比赛项目和分组数
   - 已安排日程数量
3. 通过功能卡片快速进入各管理模块
4. 查看完整的比赛日程表

## 功能详解

### 自动生成编号

**触发时机：** 所有运动员登记完成后

**生成规则：**
1. 按年级排序号排序
2. 同年级按班级排序号排序
3. 同班级内，男生编号在前，女生编号在后
4. 最终生成001、002、003...连续编号

**使用场景：** 制作号码牌、秩序册等

**示例：**
```
一年级 1班:
  001 - 张三 (男)
  002 - 李四 (男)
  003 - 王五 (男)
  004 - 赵六 (女)
  005 - 钱七 (女)

一年级 2班:
  006 - 孙八 (男)
  007 - 周九 (男)
  008 - 吴十 (女)
  009 - 郑十一 (女)
```

### 径赛自动分组

**分组逻辑：**

普通径赛（如100米、200米）：
- 获取所有报名该项目的运动员
- 随机打乱顺序
- 按每组最多6人分配
- 为每组随机分配连续的赛道号

接力项目（如4x100米接力）：
- 按班级分组
- 每个班级需要至少4人
- 随机分配一个赛道
- 4名运动员随机分配棒次

**示例：**
```
男子100米：10人报名
→ 第1组：6人（赛道2-7）
→ 第2组：4人（赛道3-6）

4x100米接力：3个班级报名
→ 一年级1班：4人（赛道2，棒次1-4）
→ 一年级2班：4人（赛道5，棒次1-4）
→ 一年级3班：4人（赛道3，棒次1-4）
```

### 日程冲突检测

系统会自动检测：
- 同一运动员在同一时间段的比赛
- 同一场地在同一时间段的冲突

**提示信息：** 编辑日程时会显示潜在冲突

### 数据编辑和调整

**支持的操作：**
- 编辑运动员信息和报名项目
- 删除运动员
- 编辑分组信息
- 删除并重新分组
- 修改日程时间和场地
- 删除日程安排

**注意事项：**
- 修改运动员信息后需要重新生成编号
- 重新分组会清除原有分组数据
- 删除日程不会影响分组数据

## 界面导航

### 顶部导航栏
- 运动会列表：查看所有运动会
- 项目管理：管理田赛和径赛项目

### 步骤条（进度指示器）
显示当前所在步骤：
1. 参赛年级
2. 运动员报名
3. 径赛分组
4. 日程安排
5. 总览

### 功能卡片（运动会详情页）
快速进入各个管理模块的入口

### 操作按钮
- "上一步"：返回前一个流程
- "下一步"：进入下一个流程
- "添加"：创建新数据
- "编辑"：修改已有数据
- "删除"：删除数据（带确认提示）

## 数据导出

### 秩序册生成
**内容包括：**
- 运动员编号
- 姓名、性别、班级
- 报名项目
- 比赛时间和场地

### 成绩册（待开发）
**内容包括：**
- 各项目比赛结果
- 运动员成绩和排名
- 班级积分统计

## 常见问题

### Q1: 如何修改已生成的编号？
A: 点击"生成编号"会重新分配所有编号。如需保持部分编号不变，请在数据库层面操作。

### Q2: 分组后发现有运动员信息错误怎么办？
A: 修改运动员信息后，需要删除对应的分组并重新生成。

### Q3: 可以为田赛项目分组吗？
A: 当前版本只支持径赛自动分组。田赛项目分组功能规划在后续版本中。

### Q4: 接力项目必须有4人吗？
A: 是的，系统只会为有4人或以上的班级创建接力队。

### Q5: 日程时间可以重叠吗？
A: 可以，但系统会提示冲突警告。实际使用中应避免冲突。

### Q6: 导入Excel失败怎么办？
A: 检查：
- 年级是否已在系统中创建
- 性别是否只包含"男"或"女"
- 文件格式是否为.xls或.xlsx
- 第一行是否为标题行

## 最佳实践

### 1. 数据准备
- 提前收集所有运动员信息
- 使用Excel模板统一格式
- 一次性导入所有数据后再生成编号

### 2. 分组策略
- 先完成所有运动员报名
- 确认报名信息无误后再生成分组
- 生成分组后进行必要的手动调整

### 3. 日程安排
- 考虑运动员体力恢复时间
- 避免同一运动员的项目过于密集
- 预留充足的准备和颁奖时间

### 4. 流程建议
```
创建运动会 
  → 添加年级（1-2天前）
  → 收集运动员信息（3-5天）
  → 批量导入运动员（1天）
  → 生成编号（即时）
  → 自动分组（即时）
  → 手动调整（1天）
  → 安排日程（1天）
  → 导出秩序册（即时）
  → 运动会开始
```

## 技术支持

如遇到问题，请：
1. 查看本文档的常见问题部分
2. 查看[数据库结构文档](./database-structure.md)
3. 查看[Excel导入指南](./excel-import-guide.md)
4. 联系系统管理员

---

**版本**: 1.0  
**最后更新**: 2025年10月4日
